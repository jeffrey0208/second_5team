<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="reply">

	
	<insert id="insertReply">
		insert into tbl_reply(rno, bno, replytext, replyer,
		secret_reply)
		VALUES(reply_seq.NEXTVAL, #{bno}, #{replytext},
		#{replyer},
		#{secretreply})
	</insert>

	<select id="listReply" resultType="second.reply.dto.ReplyVO">
		 <include refid="common.pagingPre"/>
		select
		r.rno, bno, r,replytext, r.replyer, r.secret_reply as
		secretReply,
		r.regdate, r.updatedate,
		m.user_name as userName,
		(select
		writer from tbl_board where bno = r.bno)
		as
		writer
		from tbl_reply r,
		tbl_member m
		where
		r.replyer = m.user_id
		and bno = ${bno}
		order by rno
		
	</select>

	<select id="countReply" resultType="int">
		select count(*) from
		tbl_reply where bno=#{bno}
	</select>

	<sql id="">
		select * from(
		select rownum as rn, A.*from(
		)
	</sql>

</mapper>

















