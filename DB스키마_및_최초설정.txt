참고) 인덱스에서 넘어가는 매퍼 /sample/openBoardList.do

--00

second\src\main\resources\config\spring\context-datasource.xml
에서 오라클 포트번호 / 아이디 비번등 수정적용
-------------------
11

--- DROP USER second01;

CREATE USER second01 IDENTIFIED BY second01;

GRANT CONNECT, DBA, RESOURCE TO second01;

COMMIT;

---------------


-- 1-1 게시판 테이블 생성

 CREATE TABLE TB_BOARD --테이블생성
(
    IDX NUMBER PRIMARY KEY,
    PARENT_IDX NUMBER,
    TITLE VARCHAR2(100) NOT NULL,
    CONTENTS VARCHAR2(4000) NOT NULL,
    HIT_CNT NUMBER NOT NULL,
    DEL_GB VARCHAR2(1) DEFAULT 'N' NOT NULL, -- 삭제건에 대해 비공개처리
    CREA_DTM DATE DEFAULT SYSDATE NOT NULL,
    CREA_ID VARCHAR2(30) NOT NULL
);
  
COMMENT ON TABLE TB_BOARD IS '게시판'; --코멘트달기
COMMENT ON COLUMN TB_BOARD.IDX IS '인덱스';
COMMENT ON COLUMN TB_BOARD.PARENT_IDX IS '부모글 인덱스';
COMMENT ON COLUMN TB_BOARD.TITLE IS '제목';
COMMENT ON COLUMN TB_BOARD.CONTENTS IS '내용';
COMMENT ON COLUMN TB_BOARD.HIT_CNT IS '조회수';
COMMENT ON COLUMN TB_BOARD.DEL_GB IS '삭제구분';
COMMENT ON COLUMN TB_BOARD.CREA_DTM IS '생성일자';
COMMENT ON COLUMN TB_BOARD.CREA_ID IS '생성자 ID';

--1-2----------- 테이블에 활용할 시퀀스 

CREATE SEQUENCE SEQ_TB_BOARD_IDX --시퀀스 생성
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCACHE;

INSERT INTO TB_BOARD(IDX,TITLE,CONTENTS,HIT_CNT,DEL_GB,CREA_DTM,CREA_ID) --테스트용 값 삽입
VALUES(SEQ_TB_BOARD_IDX.NEXTVAL,'제목','내용',0,'N',SYSDATE,'Admin');

---==========================

-- 2-1 -------- 파일 첨부 / 다운로드 활용 테이블

CREATE TABLE TB_FILE
(
  IDX   NUMBER,
  BOARD_IDX NUMBER NOT NULL,
  ORIGINAL_FILE_NAME VARCHAR2(260 BYTE) NOT NULL,
  STORED_FILE_NAME VARCHAR2(36 BYTE) NOT NULL,
  FILE_SIZE NUMBER,
  CREA_DTM  DATE DEFAULT SYSDATE NOT NULL,
  CREA_ID   VARCHAR2(30 BYTE) NOT NULL,
  DEL_GB    VARCHAR2(1 BYTE) DEFAULT 'N' NOT NULL,
  PRIMARY KEY (IDX)
);

------ 위 테이블은 첨부파일의 정보를 저장할 테이블이다. 

---==================

---------- 2-2. 시퀀스 생성

---다음의 쿼리를 실행시키자.

CREATE SEQUENCE SEQ_TB_FILE_IDX
  START WITH 1
  INCREMENT BY 1
  NOMAXVALUE
  NOCACHE;

--- 당연히 위에서 생성한 TB_FILE 테이블의 PK로 사용할 시퀀스이다.

commit;